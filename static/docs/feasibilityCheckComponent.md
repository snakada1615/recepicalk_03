# feasibilityCheckComponent

3つのコンポーネントを組み合わせて特定の品目のfeasibility scoreを算出する
1. FctTableModal - 作物を選択した場合、これに応じた栄養素供給量を返す
2. driSelectSingle - 対象グループを選択した場合、これに応じた栄養素必要量を返す
3. nutritionBar - 上記2つから、栄養素の銃速度をバーチャートで示す

## Props

| Name                  | Type     | Description                     | Default |
| --------------------- | -------- | ------------------------------- | ------- |
| `my-app` *required*   | `Object` | データ本体。myAppWatcherで読み込んでページ内で利用 |         |
| `page-id`             | `Number` | 現在のページ番号                        | `1`     |
| `max-page` *required* | `Number` | 作成するページ数                        | &nbsp;  |

## Data

| Name                 | Type      | Description                                        | Initial value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| -------------------- | --------- | -------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `myAppWatcher`       | `object`  | 使用する全変数のobject myAppから読み込んでこのページで利用。更新された時にemitを返す | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `ansId`              | `array`   | (カテゴリ、質問ID)の一蘭                                     | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `qaScore`            | `array`   | 質問への回答のカテゴリごとの合計                                   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `ansListWatcher`     | `array`   | 質問への回答一覧                                           | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `targetGroup`        | `array`   | 対象グループ                                             | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `targetCrop`         | `array`   | 選択された作物                                            | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `cropName`           | `array`   | 選択された作物名                                           | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `items`              | `array`   | fctの一覧                                             | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `itemsDRI`           | `array`   | driの一覧                                             | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `nutritionDemand`    | `array`   | 栄養摂取目標                                             | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `nutritionSum`       | `array`   | 栄養供給量                                              | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `nutritionRatingSet` | `array`   | 栄養素の充足率                                            | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `pageMemo`           | `string`  | ページメモ                                              | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `showFct`            | `boolean` | fctTableModal表示用のフラグ                               | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `qaList`             | `array`   | 質問と回答一覧                                            | `[ { categoryID: 1, categoryText: 'Nutrient balance', itemsQA: [ { id: 1, questionText: 'Is required amount for nutrition target feasible?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'yes'}, {value: 2, text: 'maybe yes'}, {value: 1, text: 'maybe no'}, {value: 0, text: 'no'}, ] }, ] }, { categoryID: 2, categoryText: 'Socioeconomic feasibility', itemsQA: [ { id: 2, questionText: 'Is there any social barrier to consume this commodity in general?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'no'}, {value: 2, text: 'maybe no'}, {value: 1, text: 'maybe yes'}, {value: 0, text: 'yes'}, ] }, { id: 3, questionText: 'Is there any social barrier to consume this commodity for women?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'no'}, {value: 2, text: 'maybe no'}, {value: 1, text: 'maybe yes'}, {value: 0, text: 'yes'}, ] }, { id: 4, questionText: 'Is there any social barrier to consume this commodity for child?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'no'}, {value: 2, text: 'maybe no'}, {value: 1, text: 'maybe yes'}, {value: 0, text: 'yes'}, ] }, { id: 5, questionText: 'Is this commodity affordable in the market for ordinary population?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'no'}, {value: 2, text: 'maybe no'}, {value: 1, text: 'maybe yes'}, {value: 0, text: 'yes'}, ] }, ] }, { categoryID: 3, categoryText: 'Technical feasibility', itemsQA: [ { id: 6, questionText: 'do target beneficiary have enough skill to grow this commodity?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'yes'}, {value: 2, text: 'maybe yes'}, {value: 1, text: 'maybe no'}, {value: 0, text: 'no'}, ] }, { id: 7, questionText: 'Does this commodity imply incremental workload for women?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'no'}, {value: 2, text: 'maybe no'}, {value: 1, text: 'maybe yes'}, {value: 0, text: 'yes'}, ] }, { id: 8, questionText: 'Is technical service available for this commodity?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'yes / there is no need for it since beneficiaries already have enough skill'}, {value: 2, text: 'maybe yes'}, {value: 1, text: 'maybe no'}, {value: 0, text: 'no'}, ] }, ] }, { categoryID: 4, categoryText: 'Investment', itemsQA: [ { id: 9, questionText: 'Is there need for specific infrastructure (irrigation / post harvest, etc.)?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'no'}, {value: 2, text: 'maybe no'}, {value: 1, text: 'maybe yes'}, {value: 0, text: 'yes'}, ] }, { id: 10, questionText: 'Is production input (fertilizer, seed, feed) become financial burden for small farmer?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'no'}, {value: 2, text: 'maybe no'}, {value: 1, text: 'maybe yes'}, {value: 0, text: 'yes'}, ] }, ] }, { categoryID: 5, categoryText: 'Stability', itemsQA: [ { id: 11, questionText: 'How many month can you harvest this commodity in a year?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: '10-12 mon'}, {value: 2, text: '7-9 mon'}, {value: 1, text: '4-6 mon'}, {value: 0, text: '0-3 mon'}, ] }, { id: 12, questionText: 'Are there any feasible storage method available for this commodity?', answerList: [ {value: -99, text: 'please select', disabled: true}, {value: 3, text: 'yes'}, {value: 2, text: 'maybe yes'}, {value: 1, text: 'maybe no'}, {value: 0, text: 'no'}, ] }, ] }, ]` |

## Computed Properties

| Name              | Type      | Description                               |
| ----------------- | --------- | ----------------------------------------- |
| `qaCategoryCount` | `unknown` | QAリストのカテゴリ数<br/>**Dependencies:** `ansId` |
| `pageIdComputed`  | `unknown` | 現在のページ番号<br/>**Dependencies:** `pageId`   |
| `pageOptions`     | `unknown` | 全ページ数<br/>**Dependencies:** `maxPage`     |

## Events

| Name              | Description                                                                                                          |
| ----------------- | -------------------------------------------------------------------------------------------------------------------- |
| `update:pageMemo` | 更新されたmyAppをemit<br/>**Arguments**<br/><ul><li>**`JSON.parse(JSON.stringify(this.myAppWatcher)): unknown`**</li></ul> |
| `update:myApp`    | 更新されたmyAppをemit<br/>**Arguments**<br/><ul><li>**`JSON.parse(JSON.stringify(this.myAppWatcher)): unknown`**</li></ul> |
| `update:pageId`   | <br/>**Arguments**<br/><ul><li>**`newVal: unknown`**</li></ul>                                                       |

## Methods

### updateAnsList()

ansListをmyAppから読み込んでwatch

**Syntax**

```typescript
updateAnsList(): any[]
```

### updateTargetCrop()

targetCropをmyAppから読み込んでwatch

**Syntax**

```typescript
updateTargetCrop(): any[]
```

### updateTargetGroup()

targetGroupをmyAppから読み込んでwatch

**Syntax**

```typescript
updateTargetGroup(): any[]
```

### updateNutrition()

targetGroupの更新に伴い栄養摂取目標を更新

**Syntax**

```typescript
updateNutrition(val: unknown): void
```

### updateScore()

ansListをmyAppから読み込んでscoreに変換

**Syntax**

```typescript
updateScore(): *[]
```

### updateAnsId()

QAのカテゴリとIDをセットにしてArrayに追加（カテゴリ事の集計に用いる）

**Syntax**

```typescript
updateAnsId(): *[]
```

### updateNutritionSupply()

選択された作物から栄養供給量を計算

**Syntax**

```typescript
updateNutritionSupply(crops: unknown): any
```

### updateNutritionDemand()

targetグループから栄養摂取目標を計算

**Syntax**

```typescript
updateNutritionDemand(targetGroup: unknown, dri: unknown): any
```

### updateNutritionRating()

栄養摂取目標と栄養供給量から栄養スコアを計算

**Syntax**

```typescript
updateNutritionRating(nutritionDemand: unknown, nutritionSupply: unknown): unknown
```

### updatePageMemo()

ページメモの更新：

**Syntax**

```typescript
updatePageMemo(newVal: unknown): void
```

### onTargetGroupChanged()

targetGroupの更新をmyAppに組み込んでemitで通知

**Syntax**

```typescript
onTargetGroupChanged(val: unknown): void
```

### onItemSelected()

cropの選択の変更をmyAppに組み込んでemitで通知

**Syntax**

```typescript
onItemSelected(value: unknown): void
```

### onAnsChanged()

Ansの更新をmyAppに組み込んでemitで通知

**Syntax**

```typescript
onAnsChanged(dat: unknown): void
```

### showDialogue()

**Syntax**

```typescript
showDialogue(): void
```

### summarizeQA()

カテゴリ毎のスコアを集計して戻す

**Syntax**

```typescript
summarizeQA(keys: unknown, dat: unknown): any[]
```

**Parameters**

- `keys: unknown`<br/>
  カテゴリとQA_idのペア

- `dat: unknown`<br/>
  ansList[pageId]

